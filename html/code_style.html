<!-- 
#
# @BEGIN LICENSE
#
# Psi4: an open-source quantum chemistry software package
#
# Copyright (c) 2007-2017 The Psi4 Developers.
#
# The copyrights for code used from other parties are included in
# the corresponding files.
#
# This file is part of Psi4.
#
# Psi4 is free software; you can redistribute it and/or modify
# it under the terms of the GNU Lesser General Public License as published by
# the Free Software Foundation, version 3.
#
# Psi4 is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Lesser General Public License for more details.
#
# You should have received a copy of the GNU Lesser General Public License along
# with Psi4; if not, write to the Free Software Foundation, Inc.,
# 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
#
# @END LICENSE
# -->






<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Code style conventions</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/psi4.css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" type="text/css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noticia+Text:400,i,b,bi|Open+Sans:400,i,b,bi|Roboto+Mono:400,i,b,bi&amp;display=swap" type="text/css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    
    
     
        <script src="_static/jquery.cookie.js"></script>
    

    
     
        <script src="_static/cloud.base.js"></script>
    

    
     
        <script src="_static/cloud.js"></script>
    

    <link rel="shortcut icon" href="_static/favicon-psi4.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="PsiPEP: Plans and Practices to Organize PSI4" href="psipep.html" />
    <link rel="prev" title="Updating the PSI4 Users’ and Programmers’ Manual" href="documentation.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
  </head><body>
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">Index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="psipep.html" title="PsiPEP: Plans and Practices to Organize PSI4"
             accesskey="N"><i class="fa fa-long-arrow-right fa-lg"></i></a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="documentation.html" title="Updating the PSI4 Users’ and Programmers’ Manual"
             accesskey="P"><i class="fa fa-long-arrow-left fa-lg"></i></a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="index.html" title="Table Of Contents"
             accesskey="C"><i class="fa fa-book fa-lg"></i></a> &nbsp; &nbsp;</li>
    <li><a href="http://psicode.org/"><i class="fa fa-home fa-lg"></i></a></li>
    <li><a href="http://github.com/psi4/psi4"><i class="fa fa-github fa-lg"></i></a></li>
    <li><a href="http://forum.psicode.org"><i class="fa fa-comments-o fa-lg"></i></a></li>
    <li><a href="http://github.com/psi4/psi4/edit/master/doc/sphinxman/source/code_style.rst"><i class="fa fa-pencil fa-lg"></i></a></li>
    <li style="color: #1a4162">&nbsp;&middot;&nbsp;</li>
    <li><a href="http://github.com/psi4/psi4/tree/4de011a">1.6a1.dev136</a></li>
    <li style="color: #1a4162">&nbsp;&middot;&nbsp;</li>
    <li class="nav-item nav-item-0"><a href="index.html">
        <span style="font-family: Optima, sans-serif;">P<span style="font-size: 82%;">SI</span>4</span>
        </a><i class="fa fa-angle-double-right" style="color: #a2a7b3; text-shadow: none;"></i></li>

        <li class="nav-item nav-item-this"><a href="">Code style conventions</a></li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="code-style-conventions">
<span id="sec-code-style"></span><h1>Code style conventions<a class="headerlink" href="#code-style-conventions" title="Permalink to this headline">¶</a></h1>
<p>It is important to keep a consistent formatting of the C++ and Python code
to avoid hard-to-read diffs and merge conflicts.
<a class="reference external" href="https://clang.llvm.org/docs/ClangFormat.html">clang-format</a> and <a class="reference external" href="https://github.com/google/yapf">yapf</a> can be used to format C++ and Python code,
respectively, according to a predefined style file.
<span style="font-family: Optima, sans-serif; text-transform: none;">P<span style="font-size: 82%;">SI</span>4</span> provides the <a class="reference external" href="https://github.com/psi4/psi4/blob/master/.clang-format">psi4/.clang-format</a> and <a class="reference external" href="https://github.com/psi4/psi4/blob/master/.style.yapf">psi4/.style.yapf</a> files in the root
folder of the project.
It is <strong>recommended</strong> that modifications and/or new files checked into the
repository are formatted according to these style files using <code class="docutils literal notranslate"><span class="pre">clang-format</span></code>
and <code class="docutils literal notranslate"><span class="pre">yapf</span></code>. It is then helpful if these tools be part of your development toolchain.
Once <code class="docutils literal notranslate"><span class="pre">clang-format</span></code> and <code class="docutils literal notranslate"><span class="pre">yapf</span></code> are installed, there are three ways in which
formatting of the code can be accomplished, in decreasing order of automation:</p>
<ol class="arabic simple">
<li><p>By integrating the formatters into your editor.</p></li>
<li><p>By installing Git hooks to run the formatters when committing.</p></li>
<li><p>By running the formatters manually on the modified files.</p></li>
</ol>
<section id="how-to-impose-code-style-through-your-editor">
<span id="faq-editorcodestyle"></span><h2>How to impose code style through your editor<a class="headerlink" href="#how-to-impose-code-style-through-your-editor" title="Permalink to this headline">¶</a></h2>
<p>Both <code class="docutils literal notranslate"><span class="pre">clang-format</span></code> and <code class="docutils literal notranslate"><span class="pre">yapf</span></code> can be integrated into widely used editors.
The <a class="reference external" href="https://github.com/sbdchd/neoformat">Neoformat</a> plugin can be configured
to format files when saving them to disk.</p>
</section>
<section id="how-to-impose-code-style-through-git-hooks">
<span id="faq-githookscodestyle"></span><h2>How to impose code style through Git hooks<a class="headerlink" href="#how-to-impose-code-style-through-git-hooks" title="Permalink to this headline">¶</a></h2>
<p>Git hooks are scripts that are run before or after certain Git events.
In this particular case, we want to make sure that all files that have been
added to the staging area with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> are formatted according to the style
<em>before</em> they committing them with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code>.
The hook to be modified is then the <em>pre-commit</em> hook.
<span style="font-family: Optima, sans-serif; text-transform: none;">P<span style="font-size: 82%;">SI</span>4</span> uses the <a class="reference external" href="https://pre-commit.com/">pre-commit</a> framework, with configuration file <a class="reference external" href="https://github.com/psi4/psi4/blob/master/.pre-commit-config.yaml">psi4/.pre-commit-config.yaml</a>.
To take advantage of pre-commit hooks, you will need to install the <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code> utility:</p>
<dl class="simple">
<dt>::</dt><dd><p>pip install pre-commit</p>
</dd>
</dl>
<p>or using Conda:</p>
<dl class="simple">
<dt>::</dt><dd><p>conda install pre_commit -c conda-forge</p>
</dd>
</dl>
<p>Finally, you need to install the actual hooks:</p>
<dl class="simple">
<dt>::</dt><dd><p>pre-commit install</p>
</dd>
</dl>
<p>Pre-commit hooks will be run on every <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code>, but the <code class="docutils literal notranslate"><span class="pre">--no-verify</span></code>
option can be used to skip their execution.</p>
<p>Hooks are powerful, but integrating the formatter into your editor will prove
to be better. Hooks need to be installed anew for every fresh clone of the
repository you are working on.</p>
</section>
<section id="how-to-run-code-style-tools-clang-format-and-yapf-manually">
<span id="faq-manualcodestyle"></span><h2>How to run code-style tools <cite>clang-format</cite> and <cite>yapf</cite> manually<a class="headerlink" href="#how-to-run-code-style-tools-clang-format-and-yapf-manually" title="Permalink to this headline">¶</a></h2>
<p>The least recommended approach to formatting your code is to run manually the
formatters. The following commands will format only the files that have been
modified:</p>
<dl class="simple">
<dt>::</dt><dd><p>clang-format -style=file -i <cite>git diff –relative –name-only HEAD – *.cc *.h</cite>
yapf -i <cite>git diff –relative –name-only HEAD – *.py</cite></p>
</dd>
</dl>
</section>
<section id="how-and-when-to-not-apply-code-styling-to-your-contributions">
<h2>How and when to <em>not</em> apply code styling to your contributions<a class="headerlink" href="#how-and-when-to-not-apply-code-styling-to-your-contributions" title="Permalink to this headline">¶</a></h2>
<p>TODO</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
        <p class="logo"><a href="index.html" title="index">
          <img class="logo" src="_static/psi4square.png" alt="Logo"/>
        </a></p><!-- 
#
# @BEGIN LICENSE
#
# Psi4: an open-source quantum chemistry software package
#
# Copyright (c) 2007-2017 The Psi4 Developers.
#
# The copyrights for code used from other parties are included in
# the corresponding files.
#
# This file is part of Psi4.
#
# Psi4 is free software; you can redistribute it and/or modify
# it under the terms of the GNU Lesser General Public License as published by
# the Free Software Foundation, version 3.
#
# Psi4 is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Lesser General Public License for more details.
#
# You should have received a copy of the GNU Lesser General Public License along
# with Psi4; if not, write to the Free Software Foundation, Inc.,
# 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
#
# @END LICENSE
# -->


<div id="searchbox" style="display: none" role="search">
  <!--<h3>Quick search</h3>-->
    <form class="search" action="search.html" method="get">
      <!--<div><input type="text" name="q" placeholder="search docs" /></div>-->
      <div><input type="text" name="q" placeholder="&#xF002;" style="font-family:FontAwesome, Ariel" /></div>
      <!--<div><input type="submit" value="Go" /></div>-->
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><div class="sphinx-toc sphinxlocaltoc">
    <h3><a href="index.html">table of contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Code style conventions</a><ul>
<li><a class="reference internal" href="#how-to-impose-code-style-through-your-editor">How to impose code style through your editor</a></li>
<li><a class="reference internal" href="#how-to-impose-code-style-through-git-hooks">How to impose code style through Git hooks</a></li>
<li><a class="reference internal" href="#how-to-run-code-style-tools-clang-format-and-yapf-manually">How to run code-style tools <cite>clang-format</cite> and <cite>yapf</cite> manually</a></li>
<li><a class="reference internal" href="#how-and-when-to-not-apply-code-styling-to-your-contributions">How and when to <em>not</em> apply code styling to your contributions</a></li>
</ul>
</li>
</ul>

  </div>
        </div>
      </div>
    
    
        <div class="sidebar-toggle-group no-js">
            
            <button class="sidebar-toggle" id="sidebar-hide" title="Hide the sidebar menu">
                 «
                <span class="show-for-small">hide menu</span>
                
            </button>
            <button class="sidebar-toggle" id="sidebar-show" title="Show the sidebar menu">
                
                <span class="show-for-small">menu</span>
                <span class="hide-for-small">sidebar</span>
                 »
            </button>
        </div>
    
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >Index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="psipep.html" title="PsiPEP: Plans and Practices to Organize PSI4"
             ><i class="fa fa-long-arrow-right fa-lg"></i></a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="documentation.html" title="Updating the PSI4 Users’ and Programmers’ Manual"
             ><i class="fa fa-long-arrow-left fa-lg"></i></a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="index.html" title="Table Of Contents"
             ><i class="fa fa-book fa-lg"></i></a> &nbsp; &nbsp;</li>
    <li><a href="http://psicode.org/"><i class="fa fa-home fa-lg"></i></a></li>
    <li><a href="http://github.com/psi4/psi4"><i class="fa fa-github fa-lg"></i></a></li>
    <li><a href="http://forum.psicode.org"><i class="fa fa-comments-o fa-lg"></i></a></li>
    <li><a href="http://github.com/psi4/psi4/edit/master/doc/sphinxman/source/code_style.rst"><i class="fa fa-pencil fa-lg"></i></a></li>
    <li style="color: #1a4162">&nbsp;&middot;&nbsp;</li>
    <li><a href="http://github.com/psi4/psi4/tree/4de011a">1.6a1.dev136</a></li>
    <li style="color: #1a4162">&nbsp;&middot;&nbsp;</li>
    <li class="nav-item nav-item-0"><a href="index.html">
        <span style="font-family: Optima, sans-serif;">P<span style="font-size: 82%;">SI</span>4</span>
        </a><i class="fa fa-angle-double-right" style="color: #a2a7b3; text-shadow: none;"></i></li>

        <li class="nav-item nav-item-this"><a href="">Code style conventions</a></li> 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, The Psi4 Project.
      Last updated on Thursday, 07 April 2022 10:06AM.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>